<!DOCTYPE html>
<html lang="pt-PT">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pixelify+Sans&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/p5@1.8.0/lib/p5.js"></script>

    <link rel="stylesheet" href="main.css" />
    <title>Characters</title>
  </head>
  <body>
    <form id="formId" method="post" onsubmit="submitEvent(event);">
      <div class="all_characters">
        <h4>Choose your Character</h4>
        <div class="character">
          <img src="assets/bobby.png" width="250" /> </br>
          <input type="radio" id="bobby" name="character" value="bobby" />
          <label for="bobby">Bobby Van der Meer</label>
        </div>
        <div class="character">
          <img src="assets/carter.png" width="220" /></br>
          <input type="radio" id="carter" name="character" value="carter" />
          <label for="carter">Carter Dawson</label>
        </div>
        <div class="character">
          <img src="assets/emma.png" width="220" /></br>
          <input type="radio" id="emma" name="character" value="emma" />
          <label for="emma">Emma Hillberry</label>
        </div>
      </div>

      <div class="color">
        <h4>Choose your Color</h4>
        <input type="radio" id="blue" name="color" value="blue" />
        <label for="bobby">Blue</label>
        <input type="radio" id="green" name="color" value="green" />
        <label for="carter">Green</label>
        <input type="radio" id="brown" name="color" value="brown" />
        <label for="emma">Brown</label>
      </div>
      <button type="submit" value="Bora lÃ¡"></button>
    </form>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io.connect("http://localhost:3000");
      function submitEvent(event){
        event.preventDefault();

        var formData = new FormData(event.target);
        console.log(Object.fromEntries(formData));

        sendCharacters(Object.fromEntries(formData));
      }
      
      //Enviar
      function sendCharacters(info) {
        var char = info.character;
        var col = info.color;

        socket.emit("submit", {char, col});
      }
    </script>
  </body>
</html>
